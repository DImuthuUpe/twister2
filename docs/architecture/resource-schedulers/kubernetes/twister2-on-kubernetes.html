<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>architecture/resource-schedulers/kubernetes/twister2-on-kubernetes · Twister2</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;twister2-on-kubernetes&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#twister2-on-kubernetes&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Twister2 On Kubernetes&lt;/h1&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="architecture/resource-schedulers/kubernetes/twister2-on-kubernetes · Twister2"/><meta property="og:type" content="website"/><meta property="og:url" content="https://twister2.org/"/><meta property="og:description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;twister2-on-kubernetes&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#twister2-on-kubernetes&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Twister2 On Kubernetes&lt;/h1&gt;
"/><meta property="og:image" content="https://twister2.org/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://twister2.org/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://twister2.org/blog/atom.xml" title="Twister2 Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://twister2.org/blog/feed.xml" title="Twister2 Blog RSS Feed"/><link rel="stylesheet" href="/css/code-blocks-buttons.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Oswald|Roboto&amp;display=swap"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo_large.png" alt="Twister2"/><h2 class="headerTitleWithLogo">Twister2</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/introduction" target="_self">Getting Started</a></li><li class=""><a href="/docs/compiling/compile_overview" target="_self">Docs</a></li><li class=""><a href="/docs/examples/tset/hello_world" target="_self">Tutorial</a></li><li class=""><a href="/docs/examples/examples" target="_self">Examples</a></li><li class=""><a href="/docs/developers/debugging" target="_self">Contribute</a></li><li class=""><a href="/docs/download" target="_self">Download</a></li><li class=""><a href="/configs" target="_self">Configurations</a></li><li class=""><a href="https://github.com/DSC-SPIDAL/twister2" target="_blank">GitHub</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">architecture/resource-schedulers/kubernetes/twister2-on-kubernetes</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="twister2-on-kubernetes"></a><a href="#twister2-on-kubernetes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Twister2 On Kubernetes</h1>
<p>This document explains the design, features and implementations for running Twister2 jobs on Kubernetes clusters. We designed and developed components to run Twister2 workers and the Job Master in Kubernetes clusters. An overview of the mian components of Twister2 architecture can be found in <a href="/docs/architecture/README">the document</a>.</p>
<p>First, we provide a general overview of Kubernetes system. We discuss its features from Twister2 implementation perspective. Then, we explain the design decisions that we have made when implementing each aspect of Twister2 on Kubernetes. We provide the implementation details and explain the features. In addition, we explain the limitations of each feature and point out the future works.</p>
<p>We discuss the following topics:</p>
<ul>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/twister2-on-kubernetes#kubernetes-overview">Kubernetes Overview</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/twister2-on-kubernetes#implementing-twister2-jobs-on-kubernetes">Implementing Twister2 Jobs on Kubernetes</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/twister2-on-kubernetes#docker-container-design-for-twister2">Docker Container Design for Twister2</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/twister2-on-kubernetes#kubernetes-pod-design-for-twister2">Kubernetes Pod Design for Twister2</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/twister2-on-kubernetes#packaging-and-running-twister2-jobs-in-kubernetes">Packaging and Running Twister2 Jobs in Kubernetes</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/twister2-on-kubernetes#limitations-and-future-works">Limitations and Future Works</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/twister2-on-kubernetes#kubernetes-objects-for-twister2-jobs">Kubernetes Objects for Twister2 Jobs</a></li>
</ul>
<p>In addition to running Twister2 jobs on Kubernetes clusters, We have implemented the following APIs/services:</p>
<ul>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/k8s-based-worker-discovery">Worker Discovery</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/k8s-persistent-storage">Persistent Storage</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/k8s-services">Services for Twister2 Jobs</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/k8s-worker-binding-mapping">Worker Binding and Mapping</a></li>
<li><a href="/docs/architecture/resource-schedulers/kubernetes/open-mpi-support">OpenMPI Support</a></li>
</ul>
<p>Each one is explained in a separate document.</p>
<h2><a class="anchor" aria-hidden="true" id="kubernetes-overview"></a><a href="#kubernetes-overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Kubernetes Overview</h2>
<p>Kubernetes is an open source system for managing containerized applications across multiple hosts, providing basic mechanisms for deployment, maintenance, and scaling of applications.</p>
<p>Kubernetes provides two types of computing components:</p>
<ul>
<li>pods</li>
<li>containers</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="pods"></a><a href="#pods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pods</h3>
<p>Pods are like virtual machines. They run containers. The applications in containers perform the actual computation. A pod without a container is useless.</p>
<p>Pods have:</p>
<ul>
<li>a file system that can be shared by the running containers in the pod</li>
<li>an IP address that can be used by the running containers in the pod</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="containers"></a><a href="#containers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Containers</h3>
<p>Containers are packaged applications with all their dependencies. They are supposed to run without any outside dependency.</p>
<p>Containers run in pods in Kubernetes. There can be one or multiple containers running on a pod.</p>
<p><strong>Container to Container Communications</strong>  <br>
Containers use the IP address of the encompassing pod to communicate with other containers. Containers have their own port numbers though.</p>
<p>Containers can communicate with other containers in the same pod with shared files or localhost network interface.</p>
<p>Containers can communicate with other containers in other pods using IP communication or mounting a shared files system among the pods such as NFS.</p>
<h3><a class="anchor" aria-hidden="true" id="containers-and-pod-management"></a><a href="#containers-and-pod-management" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Containers and Pod Management</h3>
<p>Kubernetes provides services to manage containerized applications for deployment, maintenance, and scaling:</p>
<ul>
<li><p>It can restart failed containers.</p></li>
<li><p>It can increase the number of instances running or decrease them (scale up - scale down).</p></li>
<li><p>It can help rolling updates to applications.</p></li>
<li><p>It provides monitoring tools for pods and containers.</p></li>
<li><p>It provides networking facilities. It provides internal IP addresses to each pod.</p>
<p>It can also expose pod applications to outside world by setting up services.</p></li>
<li><p>It provides pod binding and mapping to nodes in clusters.</p>
<p>Users can request their pods to run in some specific nodes or vice versa.</p></li>
</ul>
<p>Kubernetes provides many types of pod management constructs. Some of them are</p>
<ul>
<li>Deployments</li>
<li>StatefulSets</li>
<li>Jobs</li>
<li>Bare pods</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="deployments"></a><a href="#deployments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deployments</h4>
<p>A deployment object tries to bring back the system to its desired state at a controlled rate. It can make sure that some number of replicas for pods always run. It can be used for:</p>
<ul>
<li>A new state can be defined and the system can be moved to the new state at a controlled rate.</li>
<li>It can rollback to an earlier Deployment revision if the current state of the Deployment is not stable.</li>
<li>Scale up the Deployment to facilitate more load.</li>
<li>Pause the Deployment to apply multiple fixes to its PodTemplateSpec and then resume it to start a new roll out.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="statefulsets"></a><a href="#statefulsets" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>StatefulSets</h4>
<p>StatefulSet is used to manage stateful applications. StatefulSets are valuable for applications that require one or more of the following.</p>
<ul>
<li>Stable, unique network identifiers.</li>
<li>Stable, persistent storage.</li>
<li>Ordered, graceful deployment and scaling.</li>
<li>Ordered, graceful deletion and termination.</li>
<li>Ordered, automated rolling updates.</li>
</ul>
<p><strong>Unique IDs for pods</strong>: a StatefulSet maintains a sticky identity for each of their Pods. These pods are created from the same spec, but are not interchangeable: each has a persistent identifier that it maintains across any rescheduling.</p>
<p><strong>Persistent Storage</strong>: The storage for a given Pod must either be provisioned by a PersistentVolume Provisioner, or pre-provisioned by an admin. Deleting a StatefulSet/pod will not delete the volumes associated with the StatefulSet. Deleting volumes must be done manually.</p>
<p><strong>Requirement</strong>: StatefulSets currently require a Headless Service to be responsible for the network identity of the Pods. You are responsible for creating this Service.</p>
<p><strong>Ordinal Index</strong>: For a StatefulSet with N replicas, each Pod in the StatefulSet will be assigned an integer ordinal, from 0 up through N-1, that is unique over the Set.</p>
<p><strong>Pod Initiation Policy</strong>: Pods of a StatefulSet can be initiated in order (one after the other) or in parallel.</p>
<h4><a class="anchor" aria-hidden="true" id="jobs"></a><a href="#jobs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Jobs</h4>
<p>A job creates one or more pods and ensures that a specified number of them successfully terminate. As pods successfully complete, the job tracks the successful completions. When a specified number of successful completions is reached, the job itself is complete. Deleting a Job will cleanup the pods it created.</p>
<p><strong>Parallel Jobs with a fixed completion count</strong>: the job is complete when a desired number of pods complete with success. Pods are restarted on unsuccessful exits.</p>
<p><strong>Parallel Jobs with a work queue</strong>: Each pod is independently capable of determining whether or not all its peers are done, thus the entire Job is done. When any pod terminates with success, no new pods are created. Once any pod has exited with success, no other pod should still be doing any work or writing any output. They should all be in the process of exiting (This means that pods should wait others to complete before exiting).</p>
<h4><a class="anchor" aria-hidden="true" id="bare-pods"></a><a href="#bare-pods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bare Pods</h4>
<p>Bare pods are fully managed by users. They are initialized and ended by users. Kubernetes does not provide any services. Bare pods have their own cluster IP addresses. They can communicate with other pods in the cluster by using this IP address.</p>
<h2><a class="anchor" aria-hidden="true" id="implementing-twister2-jobs-on-kubernetes"></a><a href="#implementing-twister2-jobs-on-kubernetes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementing Twister2 Jobs on Kubernetes</h2>
<p>We decided to use StatefulSets for implementing Twister2 jobs on Kubernetes:</p>
<ul>
<li>They provide unique IDs for all pods in a job</li>
<li>They restart the failed pods with the same id</li>
<li>They provide persistent storage support</li>
<li>They support services for external communications</li>
</ul>
<p>Disadvantages of StatefulSets: We need to monitor pod completions and delete the StatefulSet objects explicitly when all workers have completed. When a pod exits without being deleted, Kubernetes tries to restart it. So when pods have completed, they need to wait to be deleted.</p>
<p>Initialization costs of StatefulSets are a little longer than the initialization costs of Jobs. My tests shows that it takes 5-10% more time to initialize a StatefulSet compared to a Job.</p>
<p>Heron is implemented by using StatefulSets.</p>
<h3><a class="anchor" aria-hidden="true" id="implementing-twister2-workers-in-kubernetes"></a><a href="#implementing-twister2-workers-in-kubernetes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementing Twister2 Workers in Kubernetes</h3>
<p>There are a number of choices when implementing Twister2 workers in Kubernetes:</p>
<ul>
<li><p><strong>One worker one pod</strong>: Exactly one worker runs in each pod. Each pod runs a single container.</p></li>
<li><p><strong>One worker one container</strong>: Exactly one worker runs in each container but multiple containers may run in a pod.</p>
<p>Therefore, multiple workers may run in a pod as separate containers.</p></li>
<li><p><strong>One worker one process</strong>: Multiple workers can run in a container as separate processes.</p></li>
</ul>
<p>One worker one pod is the recommended solution for services/applications to run in Kubernetes. However, initialization of a separate pod for each worker is slower.</p>
<p>Kubernetes does not provide any support (logging, monitoring) for multiple processes in a container. We need to keep track of the lifecycle of processes in containers. Also no resource isolation is provided.</p>
<p>Second option seems to be the best option for our case. Each Twister2 worker runs as a container. Multiple workers can run in a single pod. Users can set the number of workers in each pod using a configuration file. This also covers the first option since users can request that each pod runs only one worker.</p>
<p><strong>When running OpenMPI</strong>: When we execute OpenMPI jobs, then we go with the third option. We start a single container in each pod, then OpenMPI starts MPI worker processes. It can start more than one MPI worker in a container. OpenMPI manages the processes in this case.</p>
<p>Heron runs one pod for each Heron container. They go with the first option. (Ref: <a href="https://github.com/twitter/heron/blob/master/website/content/docs/operators/deployment/schedulers/kubernetes.md">https://github.com/twitter/heron/blob/master/website/content/docs/operators/deployment/schedulers/kubernetes.md</a>)</p>
<h3><a class="anchor" aria-hidden="true" id="statefulset-for-twister2-workers"></a><a href="#statefulset-for-twister2-workers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>StatefulSet for Twister2 Workers</h3>
<p>We create Twister2 workers in a job by creating a StatefulSet in Kubernetes cluster. For a non-MPI job, we create one container for each worker. The user specifies the number of containers (workers) in a pod through the configuration parameter:</p>
<pre><code class="hljs css language-text">kubernetes.workers.per.pod
</code></pre>
<p>This parameter shows the number of containers to start in each pod. Since all pods are identical in StatefulSets, all pods in Twister2 jobs must also be identical. Therefore, all pods must have the same number of Twister2 workers.</p>
<p>The user also specifies the total number of workers in job through the configuration parameter:</p>
<pre><code class="hljs css language-text">twister2.worker.instances
</code></pre>
<p>We divide the total number of workers to the workers per pod value to get the number of pods in a job. The value of twister2.worker.instances must be divisible by the value of kubernetes.workers.per.pod. Otherwise, we reject the job submission.</p>
<p><strong>Resources in OpenMPI</strong>: When an OpenMPI enabled job is submitted, one container is started in every pod. When more than one worker will run in each pod, then this one container has the resources of all workers in that pod. For example, if 3 workers will run in each pod and each worker requests 1 CPU, then this one container will have 3 CPUs. RAM is also similarly allocated to the single container in the pod.</p>
<p>mpirun command will start the workers in each pod. When mpirun is executed, we give the number of workers to start in each pod as a parameter. Therefore, the requested number of workers will be started in each pod. But, all workers will run in the same container in a pod when OpenMPI is used.</p>
<h4><a class="anchor" aria-hidden="true" id="pod-names-and-pod-ip-addresses"></a><a href="#pod-names-and-pod-ip-addresses" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pod Names and Pod IP Addresses</h4>
<p>We set job names as StatefulSet names. Kubernetes sets pod names as StatefulSet names with an index attached. For example, if the job name is &quot;basic-kube&quot;, then the pod names in the job will be: &quot;basic-kube-0&quot;, &quot;basic-kube-1&quot;, &quot;basic-kube-2&quot;, &quot;basic-kube-3&quot;, etc. Pod names start with the suffix &quot;-0&quot; and increase sequentially. This pod naming helps us identifying the pods in a job.</p>
<p>For example, when we start an OpenMPI enabled job, we run mpi master in the first pod. We determine the first pod in a job by examining its suffix. The first pod name always ends with the suffix &quot;-0&quot;.</p>
<p>Each pod is also assigned a unique cluster local IP address. We query the localhost from inside the pod and get this IP address.</p>
<h4><a class="anchor" aria-hidden="true" id="worker-ports-in-non-mpi-jobs"></a><a href="#worker-ports-in-non-mpi-jobs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Worker Ports in Non-MPI Jobs</h4>
<p>We assume that each Twister2 worker has at least one port number to talk to other workers in a job. When we create non-MPI jobs, each worker runs in one container. Therefore, when creating containers we set one port number for the worker in that container.</p>
<p>Since each pod is created solely for twister2 jobs, we can use whichever port we want from that pod port space. The only limitation is that when there are multiple workers in a pod, they can not use the same port numbers. They need to use separate port numbers.</p>
<p>We specify a base port number to be used by workers. It is defined in the configuration files as:</p>
<pre><code class="hljs css language-text">kubernetes.worker.base.port
</code></pre>
<p>First worker in a pod uses the base port number. Second worker in that pod uses the port (basePort +1). Third worker in that pod uses the port (basePort +2). Likewise, we assign sequentially increasing port numbers to workers running on a pod.</p>
<p>Container name suffix and the port number addition value to the base port is the same. For example, the third container name suffix in a pod is &quot;-2&quot; and the port number is basePort + 2. We uses this parallelism between container names and port numbers when discovering port numbers from container names.</p>
<h4><a class="anchor" aria-hidden="true" id="worker-ports-in-mpi-jobs"></a><a href="#worker-ports-in-mpi-jobs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Worker Ports in MPI Jobs</h4>
<p>When we create MPI enabled Twister2 jobs, each container may run multiple workers. Therefore, when creating containers we do not set port numbers for these containers.</p>
<p>MPI enabled Twister2 workers will use the port based on their MPI ranking. They use the port: BasePort + MPI Ranking</p>
<p>Since MPI ranking is unique in a job, no two workers will use the same port.</p>
<h3><a class="anchor" aria-hidden="true" id="statefulset-for-job-master"></a><a href="#statefulset-for-job-master" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>StatefulSet for Job Master</h3>
<p>We create a separate Kubernetes StatefulSet for the Job Master of the submitted job. Since, Job Master resource needs and worker resource needs are different. Job Master needs to be started as a separate pod in Kubernetes with its own CPU, memory and volume requirements.</p>
<p>In addition, we do not transfer the job package to Job Master pod. We only transfer the necessary information as environment variables.</p>
<h2><a class="anchor" aria-hidden="true" id="docker-container-design-for-twister2"></a><a href="#docker-container-design-for-twister2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker Container Design for Twister2</h2>
<p>We designed a Docker container to run Twister2 jobs. We installed the following software:</p>
<ul>
<li>based on ubuntu 16.04.</li>
<li>Java 8</li>
<li>OpenMPI 3.0.0 with Java</li>
<li>OpenSSH</li>
<li>Twister2 dependency library files</li>
<li>Twister2 scripts and library files</li>
</ul>
<p>Twister2 Docker container will be pushed to a container hub such as Docker hub. It will be downloaded from there to user clusters.</p>
<p>The working directory for the Twister2 jobs is set as:</p>
<pre><code class="hljs css language-text">/twister2
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="kubernetes-pod-design-for-twister2"></a><a href="#kubernetes-pod-design-for-twister2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Kubernetes Pod Design for Twister2</h2>
<p>We designed a Kubernetes pod to run Twister2 jobs in Twister2 Docker containers. Twister2 pods will have password free SSH among them when running OpenMPI jobs.</p>
<p>Twister2 pods will have the following volumes.</p>
<h3><a class="anchor" aria-hidden="true" id="pod-memory-volume"></a><a href="#pod-memory-volume" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pod Memory Volume</h3>
<p>Each Twister2 pod will have a memory based directory that will be shared among the containers (workers) in that pod. It is supposed to be fast but not large in size. It uses the capacity of the assigned pod memory. The job package is saved to this directory to share among containers in the pod. Volume is mounted as:</p>
<pre><code class="hljs css language-text">/twister2-memory-dir
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="pod-volatile-volume"></a><a href="#pod-volatile-volume" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pod Volatile Volume</h3>
<p>An optional volatile volume is provided to each pod, if the user enables it from the configuration files. Configuration parameter is</p>
<pre><code class="hljs css language-text">twister2.worker.volatile.disk
</code></pre>
<p>This volume will be deleted after the worker completes. the data is saved in the disk of the local machine and deleted after the pod is deleted. It is supposed to be used for intermediate data storage during the job. This volume is shared among the containers in each pod. The volatile volume is mounted as:</p>
<pre><code class="hljs css language-text">/twister2-volatile 
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="persistent-shared-volume"></a><a href="#persistent-shared-volume" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Persistent Shared Volume</h3>
<p>An optional persistent volume is provided to each pod, if the user enables it from the configuration files. Configuration parameter is</p>
<pre><code class="hljs css language-text">persistent.volume.per.worker
</code></pre>
<p>This volume is created on a shared file system such as NFS. For Twister2 to configure a persistent volume, a Persistent Storage Provisioner or statically configured PersistentVolume must exist in the cluster. The content of this volume will be available after the job has completed. While the memory volume and volatile volume is shared among only the containers in a pod, this volume is shared by all pods and all workers in a job. Therefore, this volume can be used for both durable data and sharable data among all workers. The persistent volume is mounted as:</p>
<pre><code class="hljs css language-text">/persistent
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="ssh-key-volume"></a><a href="#ssh-key-volume" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SSH Key Volume</h3>
<p>To enable password-free SSH among the pods for OpenMPI jobs, pods need to have a common ssh key pair. This key pair is distributed by a Kubernetes Secret object that must be created in advance of the job submission. This Secret object is mounted as a volume to the pods in the job. SSH start scripts use these keys to setup the password-free SSH access. SSH Key volume is mounted to pods as:</p>
<pre><code class="hljs css language-text">/ssh-key/openmpi 
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="working-directory"></a><a href="#working-directory" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Working Directory</h3>
<p>Twister2 jobs will run in the directory</p>
<pre><code class="hljs css language-text">/twister2 
</code></pre>
<p>All dependency library files are saved to the sub directory <em>/twister2/lib</em>. This directory is added to java CLASSPATH. All containers have their own /twister2 directory. This directory is not shared among the containers in a pod.</p>
<h2><a class="anchor" aria-hidden="true" id="packaging-and-running-twister2-jobs-in-kubernetes"></a><a href="#packaging-and-running-twister2-jobs-in-kubernetes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Packaging and Running Twister2 Jobs in Kubernetes</h2>
<p>We create a Docker container for the twister2 jobs. It will have all Twister2 library files and dependency library files. This container will be downloaded from a container store such as the Docker hub. Therefore, there is no need to transfer the Twister2 library packages to pods explicitly. However, we need to transfer the job package to the pods explicitly when submitting a job.</p>
<h3><a class="anchor" aria-hidden="true" id="twister2-job-package"></a><a href="#twister2-job-package" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Twister2 Job Package</h3>
<p>Twister2 job package will be a tar file. It will be generated for each job submission on the fly. It will contain:</p>
<ul>
<li>User job java files. The codes user wants to run on Twister2.</li>
<li>Configuration files for the job and the environment.</li>
<li>Serialization of the Job object. Job specific dynamic values.</li>
</ul>
<p>Twister2 job package will be generated on the submitting client machine, when submitting the job. It needs to be transferred to each Kubernetes pod.</p>
<h3><a class="anchor" aria-hidden="true" id="job-package-transfer-methods"></a><a href="#job-package-transfer-methods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Job Package Transfer Methods</h3>
<p>We implemented two types of job package transfer to pods.</p>
<ul>
<li>Job Package Transfer Through a Web Server</li>
<li>Job Package Transfer Using kubectl file copy</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="job-package-transfer-through-a-web-server"></a><a href="#job-package-transfer-through-a-web-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Job Package Transfer Through a Web Server</h3>
<p><strong>Uploading</strong>: Twister2 provides a number of uploaders. These uploaders can upload the job package to a server. We use any one of these uploaders to upload the job package to a web server directory.</p>
<p><strong>Downloading</strong>: We developed a downloader script that runs inside of pods. When a pod starts, the first container in the pod downloads the job package from the web server using wget utility. It unpacks the job package to the shared memory directory. After unpacking it, it writes a flag file to let other containers to know that it has finished downloading and unpacking the job package.</p>
<p>When containers others than the first container runs the downloader script. They just wait for the first container to download and unpack the job package. They periodically poll the existence of the flag file and sleep in between. When they see that the flag file is generated, they set the classpath and start the worker.</p>
<p>The name of the downloader script is: <em>get_job_package.sh</em></p>
<p>Disadvantage: This is a simple and effective method to transfer the job package to many pods. However, it requires the administrators to set up a web server. All users of Twister2 need to have write permissions to its directory to upload the job package. This may be cumbersome particularly for fast installations and testing. The second approach does not require a web server to work.</p>
<h3><a class="anchor" aria-hidden="true" id="job-package-transfer-using-kubectl-file-copy"></a><a href="#job-package-transfer-using-kubectl-file-copy" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Job Package Transfer Using kubectl file copy</h3>
<p>Kubernetes kubectl command provides a file copy command: kubectl cp. By using this command, one can transfer files from local machines to pods and vice versa.</p>
<p>We transfer the job package to pods by using this “kubectl cp” command. The client submitting the job needs to run on a machine where kubectl is configured to run with the Kubernetes master. We believe that should be a reasonable assumption.</p>
<h4><a class="anchor" aria-hidden="true" id="starting-job-package-transfer"></a><a href="#starting-job-package-transfer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Starting Job Package Transfer</h4>
<p>We transfer the job package in parallel to all pods in the job. However, first we need to know that the pods are ready to accept the file transfer. After sending StatefulSet create request to Kubernetes master, it takes some time to initialize the pods in the cluster. We monitor the status of all pods in the job to start the file transfer. Once the first container in a pod becomes “Started”, we start the job package transfer to that pod.</p>
<p>Alternatively, we can start transferring the job package when the phase of the pod reaches to “Running” state. However, this takes longer than necessary. Because pod phase reaches to “Running” after all containers are started in a pod. When there are 10 containers in a pod, it takes around 7 seconds to start all containers. So the pod becomes Running after that much time. We decided to watch the events for a pod and get the container “Started” events instead. After the first container is started in a pod, we try to transfer the file. If it fails, we retry after waiting some milliseconds. Usually it succeeds in the first try but sometimes it may fail and succeed in the second try. Occasionally it may succeed in third or fourth tries.</p>
<h4><a class="anchor" aria-hidden="true" id="parallel-transferring-of-the-job-package"></a><a href="#parallel-transferring-of-the-job-package" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parallel Transferring of the Job Package</h4>
<p>Transferring the job package to a pod may take some time, since “kubectl cp” command runs as a separate process. It is not implemented in Kubernetes java client library. Therefore, it is much faster to transfer the job package to each pod in parallel from separate threads.</p>
<p>A separate thread (JobPackageTransferThread) is started to transfer the job package to each pod. It waits and checks the status of the assigned pod from PodWatcher list. When its pod becomes started, it tries to transfer the job package by starting a process to use “kubectl cp” command. Sometimes this command may fail. In that case, it retries to send the package. It retries based on the value of MAX_FILE_TRANSFER_TRY_COUNT. The value of this constant can be changed in the source code.</p>
<h4><a class="anchor" aria-hidden="true" id="unpacking-the-job-package"></a><a href="#unpacking-the-job-package" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unpacking the Job Package</h4>
<p>The job package is transferred to the shared directory in each pod. When there are multiple containers in a pod, only one of them needs to unpack it. Always the worker in the first container unpacks the job package. After unpacking, it writes a flag file to let other workers to know in the same pod. Other workers in the same pods watches this flag file and proceed after it is created by the first worker.</p>
<h4><a class="anchor" aria-hidden="true" id="monitoring-the-status-of-job-package-transfer"></a><a href="#monitoring-the-status-of-job-package-transfer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Monitoring the status of Job Package Transfer</h4>
<p>When the job package transfer starts, it takes some time. First workers in the pods need to wait for the the full job package to arrive before unpacking it. They checks the existence of the job package in the shared directory periodically. When they see that the job package file is created, they check the file size. When the the size is the same as the value specified in the environment variable, they assume that the job package transfer has completed. They unpack the job package and write the flag file to the shared directory. Job submitting client sends the job package file size as an environment variable to all pods.</p>
<h2><a class="anchor" aria-hidden="true" id="limitations-and-future-works"></a><a href="#limitations-and-future-works" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limitations and Future Works</h2>
<p><strong>Dynamic Worker Additions/Removal</strong>: In our current implementation, new workers can not be added after a job is started or workers can not be removed from the job when it is running. Dynamic worker additions and removal can be implemented.</p>
<p><strong>Worker Restarts After Failures</strong>: We need to go over the worker implementations to make sure that the workers function properly after failures. Currently, this has not been carefully tested.</p>
<h2><a class="anchor" aria-hidden="true" id="kubernetes-objects-for-twister2-jobs"></a><a href="#kubernetes-objects-for-twister2-jobs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Kubernetes Objects for Twister2 Jobs</h2>
<p>When creating Twister2 jobs on Kubernetes, we deploy many Kubernetes objects. A regular Twister2 job consists of the following Kubernetes objects:</p>
<ul>
<li>A StatefulSet object for Twister2 workers</li>
<li>A Service object for the StatefulSet of workers</li>
<li>A StatefulSet object for the Job Master</li>
<li>A Service object for the StatefulSet of Job Master</li>
<li>A PersistentVolumeClaim object for the persistent storage</li>
</ul>
<p>The above objects are created when a job is submitted dynamically. We also create some long living objects on Kubernetes master. Those objects are created only once and they live on the cluster always. These long living objects are:</p>
<ul>
<li>A Secret object for password-free SSH access among pods for OpenMPI</li>
<li>A Role and RoleBinding object for giving pods required privileges</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="yaml-templates"></a><a href="#yaml-templates" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>YAML Templates</h3>
<p>Kubernetes objects are created either using YAML files or using a programming API. When using YAML files, kubectl command is used to send the requests to Kubernetes master. We create the Twister2 dynamic objects using Kubernetes Java API. This is more convenient and easier for users. However, designing YAML files help understanding the objects involved in creating the jobs.</p>
<p>We designed the YAML file templates for each dynamically created Kubernetes object.</p>
<p><a href="https://github.com/DSC-SPIDAL/twister2/tree/88f9af0614b72b52c7544f9071b2b0e3e422b76d/docs/documentation/architecture/resource-schedulers/kubernetes/yaml-templates/statefulset-for-workers.yaml"><strong>StatefulSet object for Twister2 workers</strong></a>: This is the most important object. It will create the pods for workers to run. It describes the features of the pods. Their computing resources, volume needs, labels, etc.</p>
<p><strong>Service object for Twister2 workers</strong>: Each StatefulSet objects requires to have an associated service object. We have two types of Service objects. One of them is used for the StatefulSet of workers.</p>
<ul>
<li><a href="https://github.com/DSC-SPIDAL/twister2/tree/88f9af0614b72b52c7544f9071b2b0e3e422b76d/docs/documentation/architecture/resource-schedulers/kubernetes/yaml-templates/service-headless.yaml">Headless Service for Twister2 workers</a>: A simple headless service. This does not export any services outside of the cluster.</li>
<li><a href="https://github.com/DSC-SPIDAL/twister2/tree/88f9af0614b72b52c7544f9071b2b0e3e422b76d/docs/documentation/architecture/resource-schedulers/kubernetes/yaml-templates/service-nodeport.yaml">NodePort Service for Twister2 workers</a>: A simple NodePort service. It lets workers to get requests from entities outside of the cluster.</li>
</ul>
<p><a href="https://github.com/DSC-SPIDAL/twister2/tree/88f9af0614b72b52c7544f9071b2b0e3e422b76d/docs/documentation/architecture/resource-schedulers/kubernetes/yaml-templates/statefulset-for-job-master.yaml"><strong>StatefulSet object for the Job Master</strong></a>: This is the object that describes the pod of the Job Master. Since the Job Master computing needs may be different than worker computing needs, we designed a separate StatefulSet object for the Job Master.</p>
<p><a href="https://github.com/DSC-SPIDAL/twister2/tree/88f9af0614b72b52c7544f9071b2b0e3e422b76d/docs/documentation/architecture/resource-schedulers/kubernetes/yaml-templates/service-job-master.yaml"><strong>Service object for the Job Master</strong></a>: This is simple headless Service object for the StatefulSet object of the Job Master.</p>
<p><a href="https://github.com/DSC-SPIDAL/twister2/tree/88f9af0614b72b52c7544f9071b2b0e3e422b76d/docs/documentation/architecture/resource-schedulers/kubernetes/yaml-templates/persistent-volume-claim.yaml"><strong>PersistentVolumeClaim object</strong></a>: This is the PersistentVolumeClaim object that will be used by all Twister2 pods in a job. Its capacity is the total persistent storage capacity of all workers and the Job Master.</p>
<h3><a class="anchor" aria-hidden="true" id="long-living-kubernetes-objects"></a><a href="#long-living-kubernetes-objects" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Long Living Kubernetes Objects</h3>
<p><a href="https://github.com/DSC-SPIDAL/twister2/tree/88f9af0614b72b52c7544f9071b2b0e3e422b76d/docs/documentation/deployment/kubernetes/twister2-auth.yaml"><strong>Role and RoleBinding objects</strong></a>: When Twister2 is installed in a cluster, a Role and RoleBinding object need to be created for the namespaces that will execute Twister2 jobs. This can be executed by the Kubernetes administrator once. First, the namespace field in that file needs to be changed. Then, the following command needs to be executed:</p>
<pre><code class="hljs css language-text">$kubectl create -f twister2-auth.yaml
</code></pre>
<p><a href="https://github.com/DSC-SPIDAL/twister2/tree/88f9af0614b72b52c7544f9071b2b0e3e422b76d/docs/documentation/architecture/resource-schedulers/kubernetes/yaml-templates/secret.yaml"><strong>Secret Object</strong></a>: When using OpenMPI communications in Twister2, pods need to have password-free SSH access among them. This is accomplished by first generating an SSH key pair and deploying them as a Kubernetes Secret object on the cluster. Please check <a href="/docs/deployment/kubernetes/Kubernetes">the document</a> for deploying the Secret object.</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#kubernetes-overview">Kubernetes Overview</a><ul class="toc-headings"><li><a href="#pods">Pods</a></li><li><a href="#containers">Containers</a></li><li><a href="#containers-and-pod-management">Containers and Pod Management</a></li></ul></li><li><a href="#implementing-twister2-jobs-on-kubernetes">Implementing Twister2 Jobs on Kubernetes</a><ul class="toc-headings"><li><a href="#implementing-twister2-workers-in-kubernetes">Implementing Twister2 Workers in Kubernetes</a></li><li><a href="#statefulset-for-twister2-workers">StatefulSet for Twister2 Workers</a></li><li><a href="#statefulset-for-job-master">StatefulSet for Job Master</a></li></ul></li><li><a href="#docker-container-design-for-twister2">Docker Container Design for Twister2</a></li><li><a href="#kubernetes-pod-design-for-twister2">Kubernetes Pod Design for Twister2</a><ul class="toc-headings"><li><a href="#pod-memory-volume">Pod Memory Volume</a></li><li><a href="#pod-volatile-volume">Pod Volatile Volume</a></li><li><a href="#persistent-shared-volume">Persistent Shared Volume</a></li><li><a href="#ssh-key-volume">SSH Key Volume</a></li><li><a href="#working-directory">Working Directory</a></li></ul></li><li><a href="#packaging-and-running-twister2-jobs-in-kubernetes">Packaging and Running Twister2 Jobs in Kubernetes</a><ul class="toc-headings"><li><a href="#twister2-job-package">Twister2 Job Package</a></li><li><a href="#job-package-transfer-methods">Job Package Transfer Methods</a></li><li><a href="#job-package-transfer-through-a-web-server">Job Package Transfer Through a Web Server</a></li><li><a href="#job-package-transfer-using-kubectl-file-copy">Job Package Transfer Using kubectl file copy</a></li></ul></li><li><a href="#limitations-and-future-works">Limitations and Future Works</a></li><li><a href="#kubernetes-objects-for-twister2-jobs">Kubernetes Objects for Twister2 Jobs</a><ul class="toc-headings"><li><a href="#yaml-templates">YAML Templates</a></li><li><a href="#long-living-kubernetes-objects">Long Living Kubernetes Objects</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo_large.png" alt="Twister2" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/quickstart.html">Getting Started (Quickstart)</a><a href="/docs/en/concepts/api_overview">Guides (Programming Guides)</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://dsc-twister.slack.com/">Project Chat</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/DSC-SPIDAL/twister2">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 Indiana University</section></footer></div></body></html>